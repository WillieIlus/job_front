import{K as h,L as e,M as l}from"./entry.bb66115f.js";const y=h("location",{state:()=>({locations:[],location:null,loading:!1,error:null}),getters:{getLocations:o=>o.locations,getLocation:o=>o.location,locationsCount:o=>o.locations.length},actions:{async fetchLocations(){this.loading=!0;try{const t=await(await fetch(`${e}/locations/locations`)).json();this.locations=t}catch(o){console.error(o)}finally{this.loading=!1}},async fetchLocation(o){this.loading=!0;try{const a=await(await fetch(`${e}/locations/locations/${o}`)).json();this.location=a}catch(t){console.error(t)}finally{this.loading=!1}},async createLocation(o,t){this.loading=!0;const a=l();try{const r=await fetch(`${e}/locations/locations/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a.token}`},body:JSON.stringify({name:o,description:t})});if(!r.ok){const s=await r.json();throw console.error("Bad Request Error:",s),new Error(s.detail)}const n=await r.json();this.locations.push(n)}catch(r){console.error(r)}finally{this.loading=!1}},async updateLocation(o,t,a){this.loading=!0;const r=l();try{const n=await fetch(`${e}/locations/locations/${o}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r.token}`},body:JSON.stringify({name:t,description:a})});if(!n.ok){const i=await n.json();throw console.error("Bad Request Error:",i),new Error(i.detail)}const s=await n.json(),c=this.locations.findIndex(i=>i.slug===o);this.locations[c]=s}catch(n){console.error(n)}finally{this.loading=!1}},async deleteLocation(o){try{const t=await fetch(`${e}/locations/locations/${o}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!t.ok){const a=await t.json();throw console.error("Bad Request Error:",a),new Error(a.detail)}this.locations=this.locations.filter(a=>a.slug!==o)}catch(t){console.error(t)}finally{this.loading=!1}}}});export{y as u};
